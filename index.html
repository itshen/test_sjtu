<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸‚åœºæ•°æ®å¯è§†åŒ–åˆ†æå¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <style>
        .chart-container {
            position: relative;
        }
        .comparison-value {
            font-size: 0.75rem;
            font-weight: 500;
        }
        .trend-up {
            color: #dc2626;
        }
        .trend-down {
            color: #16a34a;
        }
        .trend-neutral {
            color: #6b7280;
        }
        
        /* ç‰¹å®šäº§å“é«˜äº®æ ·å¼ */
        .highlighted-product {
            background-color: #fef3c7 !important; /* æµ…é»„è‰²èƒŒæ™¯ */
            font-weight: 600 !important;
        }
        
        .highlighted-product-header {
            background-color: #f59e0b !important; /* æ©™è‰²èƒŒæ™¯ */
            color: white !important;
            font-weight: 700 !important;
        }
        .legend-item-hidden {
            text-decoration: line-through;
            opacity: 0.5;
        }
        
        /* å¼ºåˆ¶éšè—å›¢é˜Ÿå›¾è¡¨çš„å›¾ä¾‹ */
        #team-chart-å°¤è²äºš + .chartjs-legend,
        #team-chart-çº³è¾¾å¡ + .chartjs-legend,
        #team-chart-å°¼èµ«é² + .chartjs-legend,
        canvas[id^="team-chart"] ~ .legend {
            display: none !important;
        }
        
        /* é¢„æµ‹æ•°æ®æ ·å¼ */
        .prediction-data {
            font-style: italic;
            font-weight: bold;
            color: #8B5CF6;
            position: relative;
        }
        
        .prediction-data::after {
            content: " (é¢„æµ‹)";
            font-size: 0.8em;
            color: #6366F1;
            font-weight: normal;
        }
        
        .prediction-btn {
            background: linear-gradient(45deg, #8B5CF6, #6366F1);
            animation: pulse-prediction 2s infinite;
        }
        
        @keyframes pulse-prediction {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        .coordinate-point {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .coordinate-point:hover {
            transform: scale(1.2);
        }
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .trend-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }
        .trend-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* è´¹ç”¨é¢„æµ‹æ˜¾ç¤ºæ ·å¼ */
        .cost-display {
            animation: fadeIn 0.3s ease-in-out;
            border-left: 4px solid #3B82F6;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .coordinate-info-section {
            border-bottom: 1px solid #E5E7EB;
            padding-bottom: 4px;
            margin-bottom: 4px;
        }
        
        .coordinate-info-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
        <!-- æ ‡é¢˜å’Œæ—¶é—´é€‰æ‹©å™¨ -->
        <div class="fixed top-0 left-0 right-0 bg-white shadow-md z-50 border-b">
            <div class="container mx-auto px-3 py-4">
            <div class="flex flex-wrap items-center justify-between gap-4">
                <h1 class="text-2xl font-bold text-gray-800">å¸‚åœºæ•°æ®å¯è§†åŒ–åˆ†æå¹³å°</h1>
                <div class="flex items-center gap-3">
                    <span class="text-sm font-medium text-gray-700">é€‰æ‹©æœŸé—´:</span>
                    <div class="flex gap-1">
                        <button class="period-btn bg-blue-500 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-600 transition-colors" data-period="1A">1A</button>
                        <button class="period-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-period="1B">1B</button>
                        <button class="period-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-period="2">2</button>
                        <button class="period-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-period="3">3</button>
                        <button class="period-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-period="4">4</button>
                        <button class="period-btn prediction-btn bg-purple-500 text-white px-3 py-1.5 rounded text-sm hover:bg-purple-600 transition-colors border-2 border-dashed font-bold" data-period="5">5(é¢„æµ‹)</button>
                        <button class="period-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm opacity-50 cursor-not-allowed" data-period="6" disabled>6</button>
                    </div>
                    <label class="flex items-center gap-2 text-sm">
                        <input type="checkbox" id="show-comparison" class="rounded">
                        <span>æ˜¾ç¤ºç¯æ¯”</span>
                    </label>
                </div>
            </div>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="container mx-auto px-3 py-4 pt-24">
        <!-- è¡Œä¸šæ•°æ®è¡¨æ ¼ -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-xl font-bold text-gray-800">æ•´ä¸ªè¡Œä¸šæ•°æ®</h2>
                <button id="industry-prediction-info-btn" class="bg-indigo-500 text-white px-3 py-1 rounded text-xs hover:bg-indigo-600 transition-colors prediction-info-trigger hidden" title="æŸ¥çœ‹é¢„æµ‹ç®—æ³•è¯´æ˜">
                    ğŸ“Š ç®—æ³•è¯´æ˜
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full table-auto border-collapse">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="border border-gray-300 px-4 py-2 text-left">æŒ‡æ ‡</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºš1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºš2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¤è²äºš3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">çº³è¾¾å¡1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¼èµ«é²2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²3</th>
                        </tr>
                    </thead>
                    <tbody id="industry-data-tbody">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å¸‚åœºä»½é¢è¡¨æ ¼ -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-xl font-bold text-gray-800">å¸‚åœºä»½é¢</h2>
                <button id="market-share-prediction-info-btn" class="bg-indigo-500 text-white px-3 py-1 rounded text-xs hover:bg-indigo-600 transition-colors prediction-info-trigger hidden" title="æŸ¥çœ‹é¢„æµ‹ç®—æ³•è¯´æ˜">
                    ğŸ“Š ç®—æ³•è¯´æ˜
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full table-auto border-collapse">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="border border-gray-300 px-4 py-2 text-left">ç»„åº</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºšP1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºšP2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¤è²äºšP3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">çº³è¾¾å¡P1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡P2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡P3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²P1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¼èµ«é²P2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²P3</th>
                        </tr>
                    </thead>
                    <tbody id="market-share-tbody">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å¸‚åœºä»½é¢åˆ†æ -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <h2 class="text-xl font-bold text-gray-800 mb-3">å¸‚åœºä»½é¢åˆ†æ</h2>
            
            <!-- è§†å›¾åˆ‡æ¢ -->
            <div class="mb-4 border-b">
                <div class="flex gap-4 mb-3">
                    <button class="view-btn bg-blue-500 text-white px-4 py-2 rounded-t text-sm font-medium border-b-2 border-blue-500" data-view="by-group">æŒ‰ç»„åˆ«æŸ¥çœ‹</button>
                    <button class="view-btn bg-gray-100 text-gray-700 px-4 py-2 rounded-t text-sm font-medium hover:bg-gray-200 transition-colors" data-view="by-product">æŒ‰äº§å“å¯¹æ¯”</button>
                </div>
            </div>

            <!-- æŒ‰ç»„åˆ«æŸ¥çœ‹è§†å›¾ -->
            <div id="group-view" class="view-content">
                <div class="mb-4">
                    <label class="text-sm font-medium text-gray-700 mr-4">é€‰æ‹©ç»„åˆ«:</label>
                    <div class="inline-flex gap-2">
                        <button class="group-btn bg-blue-500 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-600 transition-colors" data-group="1">ç»„1</button>
                        <button class="group-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-group="2">ç»„2</button>
                        <button class="group-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-group="3">ç»„3</button>
                        <button class="group-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-group="4">ç»„4</button>
                        <button class="group-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-group="5">ç»„5</button>
                    </div>
                </div>
                <div class="chart-container h-96">
                    <canvas id="market-share-chart"></canvas>
                </div>
            </div>

            <!-- æŒ‰äº§å“å¯¹æ¯”è§†å›¾ -->
            <div id="product-view" class="view-content hidden">
                <div class="mb-4">
                    <label class="text-sm font-medium text-gray-700 mr-4">é€‰æ‹©äº§å“:</label>
                    <div class="inline-flex gap-2 flex-wrap">
                        <button class="product-btn bg-blue-500 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-600 transition-colors" data-product="å°¤è²äºšP1">å°¤è²äºšP1</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="å°¤è²äºšP2">å°¤è²äºšP2</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="å°¤è²äºšP3">å°¤è²äºšP3</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="çº³è¾¾å¡P1">çº³è¾¾å¡P1</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="çº³è¾¾å¡P2">çº³è¾¾å¡P2</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="çº³è¾¾å¡P3">çº³è¾¾å¡P3</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="å°¼èµ«é²P1">å°¼èµ«é²P1</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="å°¼èµ«é²P2">å°¼èµ«é²P2</button>
                        <button class="product-btn bg-gray-300 text-gray-700 px-3 py-1.5 rounded text-sm hover:bg-gray-400 transition-colors" data-product="å°¼èµ«é²P3">å°¼èµ«é²P3</button>
                    </div>
                </div>
                <div class="chart-container h-96">
                    <canvas id="product-comparison-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- å¸‚åœºå®šä»· -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-xl font-bold text-gray-800">å¸‚åœºå®šä»·</h2>
                <button id="market-pricing-prediction-info-btn" class="bg-indigo-500 text-white px-3 py-1 rounded text-xs hover:bg-indigo-600 transition-colors prediction-info-trigger hidden" title="æŸ¥çœ‹é¢„æµ‹ç®—æ³•è¯´æ˜">
                    ğŸ“Š ç®—æ³•è¯´æ˜
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full table-auto border-collapse">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="border border-gray-300 px-4 py-2 text-left">ç»„åº</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºšP1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¤è²äºšP2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¤è²äºšP3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">çº³è¾¾å¡P1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡P2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">çº³è¾¾å¡P3</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²P1</th>
                            <th class="border border-gray-300 px-4 py-2 text-center highlighted-product-header">å°¼èµ«é²P2</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">å°¼èµ«é²P3</th>
                        </tr>
                    </thead>
                    <tbody id="market-pricing-tbody">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å„å›¢é˜Ÿäº§å“ç‰¹æ€§åæ ‡å¯¹æ¯” -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-xl font-bold text-gray-800">å„å›¢é˜Ÿäº§å“ç‰¹æ€§åæ ‡å¯¹æ¯”</h2>
                <div class="text-sm text-gray-600 bg-green-50 px-3 py-1 rounded-full border border-green-200">
                    ğŸ“Š å„ç»„äº§å“åœ¨çŸ©é˜µä¸­çš„ä½ç½®ã€è¶‹åŠ¿å’Œé¢„æµ‹
                </div>
            </div>
            
            <!-- äº§å“ç‰¹æ€§åæ ‡æ•°æ®è¡¨æ ¼ -->
            <div class="overflow-x-auto mb-4">
                <table class="w-full table-auto border-collapse">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="border border-gray-300 px-3 py-2 text-left">ç»„åˆ«</th>
                            <th class="border border-gray-300 px-3 py-2 text-center">é›·å¢¨ç£1</th>
                            <th class="border border-gray-300 px-3 py-2 text-center">é›·å¢¨ç£2</th>
                            <th class="border border-gray-300 px-3 py-2 text-center">é›·å¢¨ç£3</th>
                            <th class="border border-gray-300 px-3 py-2 text-center">å¹³å‡åç¦»åº¦</th>
                            <th class="border border-gray-300 px-3 py-2 text-center">è¶‹åŠ¿</th>
                        </tr>
                    </thead>
                    <tbody id="team-comparison-tbody">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            
            <!-- å„ç»„äº§å“åœ¨å„å¸‚åœºçš„ä½ç½®çŸ©é˜µå›¾è¡¨ -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <!-- å°¤è²äºšå¸‚åœºå„ç»„äº§å“ä½ç½® -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">å°¤è²äºšå¸‚åœº - å„ç»„äº§å“ä½ç½®</h3>
                    <div class="chart-container h-64">
                        <canvas id="team-chart-å°¤è²äºš"></canvas>
                    </div>
                </div>
                <!-- çº³è¾¾å¡å¸‚åœºå„ç»„äº§å“ä½ç½® -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">çº³è¾¾å¡å¸‚åœº - å„ç»„äº§å“ä½ç½®</h3>
                    <div class="chart-container h-64">
                        <canvas id="team-chart-çº³è¾¾å¡"></canvas>
                    </div>
                </div>
                <!-- å°¼èµ«é²å¸‚åœºå„ç»„äº§å“ä½ç½® -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">å°¼èµ«é²å¸‚åœº - å„ç»„äº§å“ä½ç½®</h3>
                    <div class="chart-container h-64">
                        <canvas id="team-chart-å°¼èµ«é²"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¸‚åœºç†æƒ³å€¼åæ ‡å›¾ -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
                <h2 class="text-xl font-bold text-gray-800">å¸‚åœºç†æƒ³å€¼ - æ‰­çŸ©vsç”µé˜»åæ ‡å›¾</h2>
                <div class="text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full border border-blue-200">
                    ğŸ’° å°†é¼ æ ‡æ‚¬åœåœ¨åæ ‡å›¾ä¸ŠæŸ¥çœ‹ç ”å‘é¢„ç®—
                </div>
            </div>
            
            <!-- è´¹ç”¨è®¡ç®—æ–¹æ³•è¯´æ˜ -->
            <div class="bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200">
                <div class="flex items-center mb-3">
                    <h3 class="text-lg font-semibold text-gray-800">ğŸ“Š è´¹ç”¨è®¡ç®—æ–¹æ³•</h3>
                    <button id="toggle-calculation-details" class="ml-2 text-blue-600 text-sm hover:text-blue-800">
                        [å±•å¼€è¯¦æƒ…]
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">ğŸ¯ è®¡ç®—åŸç†</h4>
                        <div class="text-sm text-gray-600 space-y-1">
                            <p>â€¢ åŸºäºå†å²ç ”å‘æ•°æ®çš„æ‰­çŸ©å’Œç”µé˜»å˜åŒ–æˆæœ¬æ¨¡å‹</p>
                            <p>â€¢ è€ƒè™‘ä¸åŒäº§å“ç±»å‹çš„ç ”å‘éš¾åº¦ç³»æ•°</p>
                            <p>â€¢ ä½¿ç”¨çº¿æ€§æ’å€¼ä¼°ç®—ä¸­é—´å€¼</p>
                            <p>â€¢ å¤åˆå‚æ•°è°ƒæ•´å¢åŠ å¤æ‚æ€§æˆæœ¬</p>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">ğŸ’¡ ä½¿ç”¨æ–¹æ³•</h4>
                        <div class="text-sm text-gray-600 space-y-1">
                            <p>â€¢ å°†é¼ æ ‡æ‚¬åœåœ¨ä»»æ„åæ ‡ä½ç½®</p>
                            <p>â€¢ æŸ¥çœ‹å„äº§å“è°ƒæ•´åˆ°è¯¥ä½ç½®çš„é¢„ç®—</p>
                            <p>â€¢ é¢„ç®—åŒ…å«æœ€å°å€¼ã€å¹³å‡å€¼ã€æœ€å¤§å€¼</p>
                            <p>â€¢ è°ƒæ•´é‡ = ç›®æ ‡ä½ç½® - å½“å‰ä½ç½®</p>
                        </div>
                    </div>
                </div>
                
                <!-- è¯¦ç»†è®¡ç®—å…¬å¼ï¼ˆé»˜è®¤éšè—ï¼‰ -->
                <div id="calculation-details" class="hidden mt-4 pt-4 border-t border-gray-300">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-700 mb-3">ğŸ“ˆ æ‰­çŸ©å˜åŒ–è´¹ç”¨æ¨¡å‹</h4>
                            <div class="bg-white rounded p-3 text-xs">
                                <table class="w-full text-xs">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="text-left py-1">æ‰­çŸ©å˜åŒ–</th>
                                            <th class="text-left py-1">æœ€å°è´¹ç”¨</th>
                                            <th class="text-left py-1">æœ€å¤§è´¹ç”¨</th>
                                            <th class="text-left py-1">æˆåŠŸç‡</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-gray-600">
                                        <tr><td>0.7</td><td>$1.1M</td><td>$1.15M</td><td>67%</td></tr>
                                        <tr><td>1.0</td><td>$0.18M</td><td>$0.40M</td><td>0%</td></tr>
                                        <tr><td>1.4</td><td>$1.38M</td><td>$1.38M</td><td>100%</td></tr>
                                        <tr><td>4.0</td><td>$4.0M</td><td>$6.0M</td><td>50%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-700 mb-3">âš¡ ç”µé˜»å˜åŒ–è´¹ç”¨æ¨¡å‹</h4>
                            <div class="bg-white rounded p-3 text-xs">
                                <table class="w-full text-xs">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="text-left py-1">ç”µé˜»å˜åŒ–</th>
                                            <th class="text-left py-1">æœ€å°è´¹ç”¨</th>
                                            <th class="text-left py-1">æœ€å¤§è´¹ç”¨</th>
                                            <th class="text-left py-1">æˆåŠŸç‡</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-gray-600">
                                        <tr><td>0.4</td><td>$0.18M</td><td>$0.40M</td><td>0%</td></tr>
                                        <tr><td>0.8</td><td>$0.75M</td><td>$0.75M</td><td>0%</td></tr>
                                        <tr><td>0.9</td><td>$1.10M</td><td>$1.15M</td><td>100%</td></tr>
                                        <tr><td>1.0</td><td>$1.38M</td><td>$1.38M</td><td>100%</td></tr>
                                        <tr><td>4.0</td><td>$4.0M</td><td>$6.0M</td><td>50%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-700 mb-3">ğŸ”§ äº§å“ç±»å‹ç³»æ•°</h4>
                            <div class="bg-white rounded p-3 text-sm">
                                <div class="space-y-1 text-gray-600">
                                    <p>â€¢ é›·å¢¨ç£1: 0.671 (å•ä½å˜åŒ–æˆæœ¬)</p>
                                    <p>â€¢ é›·å¢¨ç£2: 0.734 (å•ä½å˜åŒ–æˆæœ¬)</p>
                                    <p>â€¢ é›·å¢¨ç£3: 0.671 (å•ä½å˜åŒ–æˆæœ¬)</p>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-700 mb-3">ğŸ§® è®¡ç®—å…¬å¼</h4>
                            <div class="bg-white rounded p-3 text-sm">
                                <div class="space-y-2 text-gray-600 font-mono text-xs">
                                    <p>æœ€ç»ˆè´¹ç”¨ = (æ‰­çŸ©è´¹ç”¨ + ç”µé˜»è´¹ç”¨) Ã— äº§å“ç³»æ•° Ã— é£é™©è°ƒæ•´</p>
                                    <p>å¤æ‚æ€§è°ƒæ•´ = åŒå‚æ•°å˜åŒ–æ—¶ Ã— 1.2</p>
                                    <p>é£é™©è°ƒæ•´ = 1 + (1 - æˆåŠŸç‡) Ã— 0.5</p>
                                    <p>æ’å€¼ = çº¿æ€§æ’å€¼å·²çŸ¥æ•°æ®ç‚¹</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 bg-blue-50 rounded p-3 border border-blue-200">
                        <h4 class="font-medium text-blue-800 mb-2">ğŸ“š æ•°æ®æ¥æº</h4>
                        <div class="text-sm text-blue-700">
                            <p>åŸºäºæä¾›çš„æ‰­çŸ©å’Œç”µé˜»ç ”å‘å†å²æ¡ˆä¾‹åˆ†æï¼ŒåŒ…å«æˆåŠŸå’Œå¤±è´¥æ¡ˆä¾‹çš„é¢„ç®—èŒƒå›´ã€å˜åŒ–é‡å’ŒæˆåŠŸç‡ç»Ÿè®¡ã€‚
                            ç®—æ³•é€šè¿‡çº¿æ€§å›å½’å’ŒåŠ æƒå¹³å‡ç­‰æ–¹æ³•ï¼Œç»“åˆäº§å“ç±»å‹ç‰¹å¾ï¼Œé¢„æµ‹ä¸åŒå‚æ•°è°ƒæ•´çš„ç ”å‘æˆæœ¬ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <!-- å°¤è²äºšå¸‚åœº -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">å°¤è²äºšå¸‚åœº</h3>
                    <div class="chart-container h-64">
                        <canvas id="chart-å°¤è²äºš"></canvas>
                    </div>
                </div>
                <!-- çº³è¾¾å¡å¸‚åœº -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">çº³è¾¾å¡å¸‚åœº</h3>
                    <div class="chart-container h-64">
                        <canvas id="chart-çº³è¾¾å¡"></canvas>
                    </div>
                </div>
                <!-- å°¼èµ«é²å¸‚åœº -->
                <div class="border rounded-lg p-3">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2 text-center">å°¼èµ«é²å¸‚åœº</h3>
                    <div class="chart-container h-64">
                        <canvas id="chart-å°¼èµ«é²"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è¶‹åŠ¿åˆ†ææ¨¡æ€æ¡† -->
    <div id="trend-modal" class="trend-modal">
        <div class="bg-white w-full h-full flex flex-col">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50">
                <div class="flex items-center gap-4">
                    <h3 id="trend-title" class="text-xl font-semibold text-gray-800"></h3>
                    <div class="text-sm text-gray-600">
                        é”®ç›˜æç¤º: â† â†’ åˆ‡æ¢æœŸé—´ | ESC å…³é—­
                    </div>
                </div>
                <button id="close-trend" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div class="flex-1 p-6 overflow-hidden">
                <div class="h-full">
                    <!-- äº§å“é€‰æ‹©å™¨ -->
                    <div class="mb-4">
                        <div class="flex flex-wrap gap-2" id="product-selector">
                            <!-- åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    <!-- å›¾è¡¨å®¹å™¨ -->
                    <div class="h-[calc(100%-80px)]">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å›¢é˜Ÿä½ç½®è¯¦ç»†æ¨¡æ€æ¡† -->
    <div id="team-position-modal" class="trend-modal">
        <div class="bg-white w-full h-full flex flex-col">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50">
                <div class="flex items-center gap-4">
                    <h3 id="team-position-title" class="text-xl font-semibold text-gray-800"></h3>
                    <div class="text-sm text-gray-600 bg-green-50 px-3 py-1 rounded-full border border-green-200">
                        ğŸ’¡ æ”¯æŒé¼ æ ‡æ»šè½®ç¼©æ”¾ã€æ‹–æ‹½ç§»åŠ¨ | é¢œè‰²=ç»„åˆ«ï¼Œæ•°å­—=äº§å“
                    </div>
                    <div class="text-sm text-gray-600">
                        é”®ç›˜æç¤º: ESC å…³é—­
                    </div>
                </div>
                <button id="close-team-position" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div class="flex-1 p-6 overflow-hidden">
                <div class="h-full flex gap-4">
                    <!-- æ§åˆ¶é¢æ¿ -->
                    <div class="w-64 bg-gray-50 rounded-lg p-4 border">
                        <h4 class="font-semibold text-gray-800 mb-3">æ˜¾ç¤ºæ§åˆ¶</h4>
                        
                        <!-- å›¾ä¾‹ -->
                        <div class="mb-4">
                            <h5 class="text-sm font-medium text-gray-700 mb-2">å›¾ä¾‹è¯´æ˜</h5>
                            <div class="space-y-2 text-xs">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-gray-400" style="clip-path: polygon(50% 0%, 0% 100%, 100% 100%)"></div>
                                    <span>å¸‚åœºç†æƒ³å€¼</span>
                                </div>

                                <div class="mt-3 pt-2 border-t border-gray-300">
                                    <div class="text-xs text-gray-600">
                                        <div><strong>é¢œè‰²</strong> = ç»„åˆ« (ç¬¬1-5ç»„)</div>
                                        <div><strong>æ•°å­—</strong> = äº§å“ (1=é›·å¢¨ç£1, 2=é›·å¢¨ç£2, 3=é›·å¢¨ç£3)</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç»„åˆ«ç­›é€‰ -->
                        <div class="mb-4">
                            <h5 class="text-sm font-medium text-gray-700 mb-2">ç»„åˆ«æ˜¾ç¤º</h5>
                            <div class="space-y-1" id="team-filter-controls">
                                <!-- åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- äº§å“ç­›é€‰ -->
                        <div class="mb-4">
                            <h5 class="text-sm font-medium text-gray-700 mb-2">äº§å“æ˜¾ç¤º</h5>
                            <div class="space-y-1" id="product-filter-controls">
                                <!-- åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- é‡ç½®æŒ‰é’® -->
                        <button id="reset-team-chart" class="w-full bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600 transition-colors">
                            é‡ç½®è§†å›¾
                        </button>
                    </div>
                    
                    <!-- å›¾è¡¨å®¹å™¨ -->
                    <div class="flex-1 h-full">
                        <canvas id="team-position-detail-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full m-4">
            <div class="p-6">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">è®¿é—®éªŒè¯</h2>
                    <p class="text-gray-600 text-sm">è¯·è¾“å…¥è®¿é—®å¯†ç è¿›å…¥ç³»ç»Ÿ</p>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">è®¿é—®å¯†ç </label>
                    <input 
                        type="password" 
                        id="access-password" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
                        placeholder="è¯·è¾“å…¥6ä½è®¿é—®å¯†ç "
                        maxlength="6"
                    >
                </div>
                
                <button 
                    id="login-btn"
                    class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors mb-4"
                >
                    è¿›å…¥ç³»ç»Ÿ
                </button>
                
                <div id="login-error" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm"></div>
            </div>
        </div>
    </div>

    <!-- é¢„æµ‹ç®—æ³•è¯´æ˜æ¨¡æ€æ¡† -->
    <div id="prediction-info-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg w-full max-w-5xl max-h-[90vh] overflow-auto">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-800">ğŸ”® é¢„æµ‹ç®—æ³•è¯´æ˜</h2>
                        <button id="close-prediction-modal" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-yellow-700">
                                    <strong>é‡è¦æç¤ºï¼š</strong>å†å²æ•°æ®é¢„æµ‹ä»…ä¾›å‚è€ƒï¼Œå®é™…ç»“æœå¯èƒ½å› å¸‚åœºå˜åŒ–ã€æ”¿ç­–è°ƒæ•´ç­‰å› ç´ è€Œæœ‰æ‰€ä¸åŒã€‚
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">ğŸ“Š é¢„æµ‹æ–¹æ³•æ¦‚è§ˆ</h3>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-medium text-purple-700 mb-2">æ•°æ®çª—å£</h4>
                                <p class="text-sm text-gray-600">ä½¿ç”¨ <strong>Round 2 å’Œ Round 3</strong> çš„å†å²æ•°æ®è¿›è¡Œé¢„æµ‹</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-medium text-purple-700 mb-2">é¢„æµ‹ç›®æ ‡</h4>
                                <p class="text-sm text-gray-600">ç”Ÿæˆ <strong>Round 5</strong> çš„é¢„æµ‹æ•°å€¼</p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">ğŸ¯ åˆ†ç±»é¢„æµ‹é€»è¾‘</h3>
                            
                            <div class="bg-blue-50 rounded-lg p-4">
                                <h4 class="font-medium text-blue-700 mb-2">ğŸ“ˆ è®¢å•æ•°æ®</h4>
                                <p class="text-sm text-gray-600 mb-2"><strong>æ–¹æ³•ï¼š</strong>çº¿æ€§å›å½’ + å¢é•¿ç‡æ ¡æ­£</p>
                                <p class="text-sm text-gray-600"><strong>ç‰¹ç‚¹ï¼š</strong>è€ƒè™‘ä¸šåŠ¡å¢é•¿è¶‹åŠ¿ï¼Œç¡®ä¿é¢„æµ‹å€¼åˆç†</p>
                            </div>

                            <div class="bg-green-50 rounded-lg p-4">
                                <h4 class="font-medium text-green-700 mb-2">ğŸ’° æ”¶å…¥æ•°æ®</h4>
                                <p class="text-sm text-gray-600 mb-2"><strong>æ–¹æ³•ï¼š</strong>å¹³å‡å¢é•¿ç‡é¢„æµ‹</p>
                                <p class="text-sm text-gray-600"><strong>ç‰¹ç‚¹ï¼š</strong>åŸºäºå†å²å¢é•¿ç‡è®¡ç®—æœªæ¥æ”¶å…¥</p>
                            </div>

                            <div class="bg-orange-50 rounded-lg p-4">
                                <h4 class="font-medium text-orange-700 mb-2">ğŸ“Š æ¯”ç‡æ•°æ®</h4>
                                <p class="text-sm text-gray-600 mb-2"><strong>æ–¹æ³•ï¼š</strong>åŠ æƒå¹³å‡ + è¶‹åŠ¿è°ƒæ•´</p>
                                <p class="text-sm text-gray-600"><strong>ç‰¹ç‚¹ï¼š</strong>é‡è§†æœ€è¿‘æ•°æ®ï¼Œé€‚åˆæ¯›åˆ©ç‡ã€å¸‚åœºä»½é¢ç­‰</p>
                            </div>

                            <div class="bg-red-50 rounded-lg p-4">
                                <h4 class="font-medium text-red-700 mb-2">ğŸ’¸ æˆæœ¬æ•°æ®</h4>
                                <p class="text-sm text-gray-600 mb-2"><strong>æ–¹æ³•ï¼š</strong>çº¿æ€§å›å½’ + é€šèƒ€ä¿æŠ¤</p>
                                <p class="text-sm text-gray-600"><strong>ç‰¹ç‚¹ï¼š</strong>è€ƒè™‘æˆæœ¬ä¸Šå‡è¶‹åŠ¿ï¼Œè®¾ç½®æœ€å°å¢é•¿ç‡</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 bg-indigo-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-indigo-800 mb-3">ğŸ§® æ ¸å¿ƒç®—æ³•</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-medium text-indigo-700 mb-2">çº¿æ€§å›å½’å…¬å¼</h4>
                                <div class="bg-white rounded p-3 font-mono text-sm">
                                    y = ax + b<br/>
                                    <span class="text-gray-600">å…¶ä¸­ a = æ–œç‡, b = æˆªè·</span>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-medium text-indigo-700 mb-2">åŠ æƒå¹³å‡å…¬å¼</h4>
                                <div class="bg-white rounded p-3 font-mono text-sm">
                                    åŠ æƒå¹³å‡ = Î£(å€¼áµ¢ Ã— æƒé‡áµ¢) / Î£æƒé‡áµ¢<br/>
                                    <span class="text-gray-600">æœ€è¿‘æ•°æ®æƒé‡æ›´å¤§</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button id="close-prediction-modal-btn" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg transition-colors">
                            æ˜ç™½äº†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        </div>

    <!-- ä¼šè¯çŠ¶æ€æ˜¾ç¤º -->
    <div id="session-info" class="fixed top-20 left-4 bg-white rounded-lg shadow-md px-4 py-2 text-sm border hidden z-40">
        <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
            <span id="session-timer">--</span>
            <button id="logout-btn" class="ml-2 text-red-600 hover:text-red-800">é€€å‡º</button>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div id="tooltip" class="tooltip"></div>

    <script src="auth.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
